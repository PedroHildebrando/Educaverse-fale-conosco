<!DOCTYPE html> 
<html lang="pt-BR"> 
<head> 
    <meta charset="UTF-8" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
    <title>Login - Educaverse</title> 
    <link rel="stylesheet" href="style.css" /> 
</head> 
<body> 
    
    <div class="container"> 
        <h1>Acessar Conta</h1> 
        
        <form class="contact-form"> 
    
            <label for="email_cliente">E-mail</label> 
            <input 
                type="email" 
                id="email_cliente" 
                name="email_cliente" 
                placeholder="seuemail@exemplo.com" 
                required 
            /> 
    
            <label for="senha">Senha</label> 
            <input 
                type="password" 
                id="senha" 
                name="senha" 
                placeholder="**********" 
                required 
            /> 
    
            <button id="btn_login">Entrar</button> 
        </form> 
    
        <p id="resultado"></p> 
    
        <p><a href="cadastro.html">Não tenho conta? Cadastre-se</a></p> 
    </div> 
    
    <script> 
        document.getElementById("btn_login").addEventListener("click", async (event) => { 
            // Previne o recarregamento da página ao enviar o formulário
            event.preventDefault(); 
        
            const email_cliente = document.getElementById("email_cliente").value; 
            const senha = document.getElementById("senha").value; 
            const resultadoElement = document.getElementById("resultado");
        
            // Limpa mensagens anteriores
            resultadoElement.innerText = "";
            resultadoElement.style.color = "black";
        
            try { 
                // Envia dados para o endpoint /login no seu backend Node.js
                const resposta = await fetch(`http://localhost:3000/login`, { 
                    method: "POST", 
                    headers: { 
                        "Accept": "application/json", 
                        "Content-Type": "application/json" 
                    }, 
                    body: JSON.stringify({ 
                        email_cliente, 
                        senha 
                    }) 
                }); 
        
                const dados = await resposta.json(); 
        
                if (resposta.ok) { 
                    // Se o status for 200 (OK)
                    resultadoElement.innerText = dados.resposta || "Login realizado com sucesso!"; 
                    resultadoElement.style.color = "green"; 
                    
                    // Exemplo: Redirecionar para o painel após 1 segundo
                    // setTimeout(() => {
                    //     window.location.href = "painel.html"; 
                    // }, 1000);
                    
                } else { 
                    // Se o status for 401 (Não Autorizado) ou 500 (Erro do Servidor)
                    resultadoElement.innerText = dados.resposta || "Erro no Login. Verifique suas credenciais."; 
                    resultadoElement.style.color = "red"; 
                } 
        
            } catch (error) { 
                // Erro de conexão (se o servidor Node.js não estiver rodando)
                resultadoElement.innerText = "Erro: Não foi possível conectar ao servidor (http://localhost:3000)."; 
                resultadoElement.style.color = "darkred"; 
                console.error("Erro de conexão:", error); 
            } 
        }); 
    </script> 
    
</body> 
</html>
 